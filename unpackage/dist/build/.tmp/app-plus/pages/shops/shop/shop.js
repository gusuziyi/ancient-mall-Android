(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shops/shop/shop"],{"2e5f":function(t,e,s){"use strict";s.r(e);var a=s("4c19"),i=s("94d4");for(var o in i)"default"!==o&&function(t){s.d(e,t,function(){return i[t]})}(o);var n=s("2877"),c=Object(n["a"])(i["default"],a["a"],a["b"],!1,null,"1838e0bc",null);e["default"]=c.exports},3752:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(s("deb9"));function i(t){return t&&t.__esModule?t:{default:t}}var o=s("16c0"),n=getApp(),c={components:{Buy:a.default},props:{id:String},data:function(){return{restTime:"",shopData:{imgs:{}},fav:!1,favArr:[],choosedSize:{},choosedType:{},price:0,buyInfo:[],showBuy:!1}},mounted:function(){this.setShopData(this.id),this.buyInfo=[[this.shopData],this.choosedSize,this.choosedType,0]},methods:{onBuy:function(){this.choosedSize,this.choosedType;this.showBuy=!0},putInCart:function(){var t=this.shopData,e=this.choosedSize,s=this.choosedType,a=(t.price*s.price*e.price).toFixed(2),i={id:t.id,name:t.shop,imgs:t.imgs.sqr,price:a,num:1,types:s.value,sizes:e.value},n={shops:t.shops};o.onQuery("cart",n,function(a){if(0==a.length){var n={shops:t.shops,area:t.area,class:t.class,shop:[]};n.shop.push(i),o.onAdd("cart",n,function(t){wx.showToast({title:"已加购物车",icon:"success",duration:2e3})})}else{var c={shop:[]},r=!1,u=a[0].shop;u.forEach(function(a,i){a.name==t.shop&&a.types==s.value&&a.sizes==e.value&&(r=!0,u[i].num++)}),r||u.push(i),c.shop=u,o.onEdit("cart",a[0]._id,c),wx.showToast({title:"已加入购物车",icon:"success",duration:2e3})}})},radioTChange:function(t){var e=Number(t.detail.value),s=(this.shopData.price*this.choosedSize.price*e).toFixed(2),a={price:e};this.setData({price:s,choosedType:a})},radioSChange:function(t){var e=Number(t.detail.value),s={price:e},a=(this.shopData.price*e*this.choosedType.price).toFixed(2);this.setData({price:a,choosedSize:s})},_cancelEvent:function(){this.showBuy=!1},_confirmEvent:function(){this.showBuy=!1},helloJas:function(){wx.navigateTo({url:"../../jas/jas"})},setShopData:function(t){var e=this;wx.showLoading({title:"玩命加载中"});var s=n.globalData.favArr,a=s[t-1];t=parseInt(t);var i={id:t};o.onQuery("shop",i,function(t){var i=t[0],o=i.restTime,n=(i.price*i.altSizes[0].price*i.altTypes[0].price).toFixed(2);e.leftTimer(o),e.setData({shopData:i,price:n,favArr:s,fav:a,choosedSize:i.altSizes[0],choosedType:i.altTypes[0]}),wx.hideLoading()})},leftTimer:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,s=60*e*60*1e3,a=(new Date).getTime(),i=a+s,o=i/1e3-a/1e3,n=setInterval(function(){o--;var e=parseInt(o/60/60,10),s=parseInt(o/60%60,10),a=parseInt(o%60,10);e=t.checkTime(e),s=t.checkTime(s),a=t.checkTime(a);var i=e+":"+s+":"+a;t.setData({restTime:i}),o<=0&&clearInterval(n)},1e3)},checkTime:function(t){return t<10&&(t="0"+t),t},goShare:function(){t.share({provider:"weixin",scene:"WXSceneSession",type:0,href:"https://www.jianshu.com/p/fb0f81152174",title:"美妆小铺安卓移植版",summary:"美妆小铺安卓移植版,原版为微信小程序,该版本使用uniApp进行了安卓适配",imageUrl:"/static/1.png",success:function(t){console.log("success:"+JSON.stringify(t))},fail:function(t){console.log("fail:"+JSON.stringify(t))}})},goFav:function(){var t=this.shopData.id,e=this.favArr,s=!this.fav,a="";a=s?"已收藏":"取消收藏",wx.showToast({icon:"none",title:a}),this.setData({fav:s}),e[t-1]=s,wx.setStorage({key:"myfav",data:e}),n.globalData.favArr=e},goShops:function(){var t=this.shopData.shops,e=this.shopData.area;wx.navigateTo({url:"../shops?shops="+t+"&area="+e})}}};e.default=c}).call(this,s("6e42")["default"])},"4c19":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Shop",{attrs:{id:t.id,eventid:"253ecb54-0",mpcomid:"253ecb54-0"},on:{onShareAppMessage:t.onShareAppMessage}})},i=[];s.d(e,"a",function(){return a}),s.d(e,"b",function(){return i})},"71e7":function(t,e,s){"use strict";s.r(e);var a=s("f7c4"),i=s("c279");for(var o in i)"default"!==o&&function(t){s.d(e,t,function(){return i[t]})}(o);s("c052");var n=s("2877"),c=Object(n["a"])(i["default"],a["a"],a["b"],!1,null,"771b06e0",null);e["default"]=c.exports},"8c26":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(s("71e7"));function i(t){return t&&t.__esModule?t:{default:t}}var o={components:{Shop:a.default},data:function(){return{id:0}},onLoad:function(t){this.id=t.id},onShareAppMessage:function(){return{title:"美妆小铺古风版",path:"pages/shops/shop/shop",success:function(t){console.log("转发成功:"+JSON.stringify(t))}}}};e.default=o},9119:function(t,e,s){"use strict";s("0460");var a=o(s("b0ce")),i=o(s("2e5f"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(i.default))},9288:function(t,e,s){},"94d4":function(t,e,s){"use strict";s.r(e);var a=s("8c26"),i=s.n(a);for(var o in a)"default"!==o&&function(t){s.d(e,t,function(){return a[t]})}(o);e["default"]=i.a},c052:function(t,e,s){"use strict";var a=s("9288"),i=s.n(a);i.a},c279:function(t,e,s){"use strict";s.r(e);var a=s("3752"),i=s.n(a);for(var o in a)"default"!==o&&function(t){s.d(e,t,function(){return a[t]})}(o);e["default"]=i.a},f7c4:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",[s("view",{staticClass:"weui-cells"},[s("image",{staticClass:"q-img",attrs:{src:t.shopData.imgs.sqr}}),s("view",{staticClass:"q-shop"},[s("view",{staticClass:"q-bottom"},[s("view",{staticClass:"q-title"},[s("text",{staticClass:"q-name"},[t._v(t._s(t.shopData.shop))]),s("view",{staticClass:"q-chat",staticStyle:{"justify-content":"flex-end"}},[s("view",{staticClass:"q-share"},[s("view",{staticClass:"q-rabot",attrs:{eventid:"0db466bc-0"},on:{tap:t.helloJas}},[s("text",{staticClass:"iconfont icon-message q-share-icon"}),s("text",{staticClass:"q-jas"},[t._v("智能客服")])])])])]),s("view",{staticClass:"q-money"},[s("p",{staticClass:"q-price"},[t._v(t._s(t.price)+"元"),s("span",{staticClass:"q-origin-pirce"},[t._v(t._s(t.shopData.originPrice)+"元")]),s("span",{staticClass:"q-remain"},[t._v("还剩"+t._s(t.shopData.restNum)+"份")])]),s("p",{staticClass:"q-remain-time"},[s("view",[t._v("距离结束")]),s("view",{staticClass:"q-time"},[t._v(t._s(t.restTime))])])],1),s("view",{staticClass:"q-area"},[s("text",{staticClass:"q-sell"},[t._v("已售出"+t._s(t.shopData.sellNum)+"件")]),s("text",{staticClass:"q-city"},[t._v(t._s(t.shopData.area))])]),s("view",{staticClass:"q-alt"},[s("view",{staticClass:"q-square"}),s("view",[t._v("尺寸")]),s("radio-group",{staticClass:"radio-group",attrs:{eventid:"0db466bc-1",mpcomid:"0db466bc-0"},on:{change:t.radioSChange}},t._l(t.shopData.altSizes,function(e,a){return s("label",{key:a,staticClass:"radio"},[s("radio",{attrs:{value:""+e.price,color:"purple",checked:e.checked}}),t._v(t._s(e.value))],1)}))],1),s("view",{staticClass:"q-alt"},[s("view",{staticClass:"q-square"}),s("view",[t._v("类型")]),s("radio-group",{staticClass:"radio-group",attrs:{eventid:"0db466bc-2",mpcomid:"0db466bc-1"},on:{change:t.radioTChange}},t._l(t.shopData.altTypes,function(e,a){return s("label",{key:a,staticClass:"radio"},[s("radio",{attrs:{value:""+e.price,color:"purple",checked:e.checked}}),t._v(t._s(e.value))],1)}))],1),s("view",{staticClass:"q-btn-div"},[s("view",{staticClass:"q-icons"},[s("view",{staticClass:"q-share-icons",attrs:{eventid:"0db466bc-3"},on:{tap:t.goShops}},[s("text",{staticClass:"iconfont icon-shop "}),s("p",[t._v("店铺")])],1),s("view",{staticClass:"q-share-icons",attrs:{eventid:"0db466bc-4"},on:{tap:t.goFav}},[t.fav?s("text",{staticClass:"iconfont icon-check-circle"}):s("text",{staticClass:"iconfont icon-star"}),t.fav?s("p",[t._v("已收藏")]):s("p",[t._v("收藏")])],1),s("view",{staticClass:"q-share-icons"},[s("button",{staticClass:"share",attrs:{"open-type":"share",eventid:"0db466bc-5"},on:{tap:t.goShare}},[s("text",{staticClass:"iconfont icon-share "}),s("p",[t._v("分享")])],1)],1)]),s("view",{staticClass:"q-btns"},[s("button",{staticClass:"q-btn",attrs:{type:"primary",size:"mini",eventid:"0db466bc-6"},on:{tap:t.putInCart}},[t._v("加购物车")]),s("button",{staticClass:"q-btn",attrs:{type:"primary",size:"mini",eventid:"0db466bc-7"},on:{tap:t.onBuy}},[t._v("立即购买")])],1)])])])]),s("Buy",{directives:[{name:"show",rawName:"v-show",value:t.showBuy,expression:"showBuy"}],attrs:{"buy-info":t.buyInfo,show:t.showBuy,eventid:"0db466bc-8",mpcomid:"0db466bc-2"},on:{cancelEvent:t._cancelEvent,confirmEvent:t._confirmEvent}})],1)},i=[];s.d(e,"a",function(){return a}),s.d(e,"b",function(){return i})}},[["9119","common/runtime","common/vendor"]]]);